shortcut={all_shortcuts:{},add:function(n,t,i){var e={type:"keydown",propagate:!1,disable_in_input:!1,target:document,keycode:!1},f,r,o,u;if(i)for(f in e)typeof i[f]=="undefined"&&(i[f]=e[f]);else i=e;r=i.target;typeof i.target=="string"&&(r=document.getElementById(i.target));o=this;n=n.toLowerCase();u=function(r){var o,e,s;if(r=r||window.event,!i.disable_in_input||(r.target?o=r.target:r.srcElement&&(o=r.srcElement),o.nodeType==3&&(o=o.parentNode),o.tagName!="INPUT"&&o.tagName!="TEXTAREA")){r.keyCode?code=r.keyCode:r.which&&(code=r.which);e=String.fromCharCode(code).toLowerCase();code==188&&(e=",");code==190&&(e=".");var h=n.split("+"),f=0,c={"`":"~","1":"!","2":"@","3":"#","4":"$","5":"%","6":"^","7":"&","8":"*","9":"(","0":")","-":"_","=":"+",";":":","'":'"',",":"<",".":">","/":"?","\\":"|"},l={esc:27,escape:27,tab:9,space:32,"return":13,enter:13,backspace:8,scrolllock:145,scroll_lock:145,scroll:145,capslock:20,caps_lock:20,caps:20,numlock:144,num_lock:144,num:144,pause:19,"break":19,insert:45,home:36,"delete":46,end:35,pageup:33,page_up:33,pu:33,pagedown:34,page_down:34,pd:34,left:37,up:38,right:39,down:40,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},u={shift:{wanted:!1,pressed:!1},ctrl:{wanted:!1,pressed:!1},alt:{wanted:!1,pressed:!1},meta:{wanted:!1,pressed:!1}};for(r.ctrlKey&&(u.ctrl.pressed=!0),r.shiftKey&&(u.shift.pressed=!0),r.altKey&&(u.alt.pressed=!0),r.metaKey&&(u.meta.pressed=!0),s=0;k=h[s],s<h.length;s++)k=="ctrl"||k=="control"?(f++,u.ctrl.wanted=!0):k=="shift"?(f++,u.shift.wanted=!0):k=="alt"?(f++,u.alt.wanted=!0):k=="meta"?(f++,u.meta.wanted=!0):k.length>1?l[k]==code&&f++:i.keycode?i.keycode==code&&f++:e==k?f++:c[e]&&r.shiftKey&&(e=c[e],e==k&&f++);if(f==h.length&&u.ctrl.pressed==u.ctrl.wanted&&u.shift.pressed==u.shift.wanted&&u.alt.pressed==u.alt.wanted&&u.meta.pressed==u.meta.wanted&&(t(r),!i.propagate))return r.cancelBubble=!0,r.returnValue=!1,r.stopPropagation&&(r.stopPropagation(),r.preventDefault()),!1}};this.all_shortcuts[n]={callback:u,target:r,event:i.type};r.addEventListener?r.addEventListener(i.type,u,!1):r.attachEvent?r.attachEvent("on"+i.type,u):r["on"+i.type]=u},remove:function(n){var t;if(n=n.toLowerCase(),t=this.all_shortcuts[n],delete this.all_shortcuts[n],t){var r=t.event,i=t.target,u=t.callback;i.detachEvent?i.detachEvent("on"+r,u):i.removeEventListener?i.removeEventListener(r,u,!1):i["on"+r]=!1}}};